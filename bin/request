#!/usr/bin/env php
<?php

require dirname(__FILE__).'/../lib/AdobeDigitalMarketing/Autoloader.php';
AdobeDigitalMarketing_Autoloader::register();

$auth = new AdobeDigitalMarketing_Auth_OAuth2();
$adm = new AdobeDigitalMarketing_Client(new AdobeDigitalMarketing_HttpClient_Curl(array(), $auth));

$adm->authenticate($argv[1], $argv[2], $argv[3]);

$parameters = array();
parse_str(isset($argv[5]) ? $argv[5] : '', $parameters);
$response = $adm->getSuiteApi()->post($argv[4], $parameters);

if (is_string($response)) {
	echo "$response\n";
} elseif (is_array($response)) {
	print_r($response);
} else {
	print_r($adm->getLastResponse());
}
